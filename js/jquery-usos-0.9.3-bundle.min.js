/** 
 * jQuery-USOS *BUNDLE VERSION* -- this file includes all jQuery-USOS 
 * JavaScript dependencies except jQuery and jQuery-UI. 
 */ 
 
/*
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={};function E(F){return typeof F==="string"}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H){L=L.replace(h,r)}}O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else{O=M(F!==i?F:p[g][k])}return O}a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else{N=0}if(K.length===2){J=r(K[1]);if(F){J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J}if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else{if($.isArray(H[P])){H[P].push(J)}else{if(H[P]!==i){H[P]=[H[P],J]}else{H[P]=J}}}}else{if(P){H[P]=F?i:""}}});return H};function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else{F=E(F)?F.replace(H?w:x,""):F}return l(F,G)}l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y];function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i}return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i){F=2}var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})}q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H;function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)}if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h;function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e){return false}$(j.start)},teardown:function(){if(e){return false}$(j.stop)}});j=(function(){var m={},r,n,o,q;function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}}m.start=function(){if(r){return}var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else{if(u!==t){i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u}}r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this); 
//colResizable - by Alvaro Prieto Lauroba - MIT & GPL
(function(a){function h(b){var c=a(this).data(q),d=m[c.t],e=d.g[c.i];e.ox=b.pageX;e.l=e[I]()[H];i[D](E+q,f)[D](F+q,g);P[z](x+"*{cursor:"+d.opt.dragCursor+K+J);e[B](d.opt.draggingClass);l=e;if(d.c[c.i].l)for(b=0;b<d.ln;b++)c=d.c[b],c.l=j,c.w=c[u]();return j}function g(b){i.unbind(E+q).unbind(F+q);a("head :last-child").remove();if(l){l[A](l.t.opt.draggingClass);var f=l.t,g=f.opt.onResize;l.x&&(e(f,l.i,1),d(f),g&&(b[G]=f[0],g(b)));f.p&&O&&c(f);l=k}}function f(a){if(l){var b=l.t,c=a.pageX-l.ox+l.l,f=b.opt.minWidth,g=l.i,h=1.5*b.cs+f+b.b,i=g==b.ln-1?b.w-h:b.g[g+1][I]()[H]-b.cs-f,f=g?b.g[g-1][I]()[H]+b.cs+f:h,c=s.max(f,s.min(i,c));l.x=c;l.css(H,c+p);if(b.opt.liveDrag&&(e(b,g),d(b),c=b.opt.onDrag))a[G]=b[0],c(a)}return j}function e(a,b,c){var d=l.x-l.l,e=a.c[b],f=a.c[b+1],g=e.w+d,d=f.w-d;e[u](g+p);f[u](d+p);a.cg.eq(b)[u](g+p);a.cg.eq(b+1)[u](d+p);if(c)e.w=g,f.w=d}function d(a){a.gc[u](a.w);for(var b=0;b<a.ln;b++){var c=a.c[b];a.g[b].css({left:c.offset().left-a.offset()[H]+c.outerWidth()+a.cs/2+p,height:a.opt.headerOnly?a.c[0].outerHeight():a.outerHeight()})}}function c(a,b){var c,d=0,e=0,f=[];if(b)if(a.cg[C](u),a.opt.flush)O[a.id]="";else{for(c=O[a.id].split(";");e<a.ln;e++)f[y](100*c[e]/c[a.ln]+"%"),b.eq(e).css(u,f[e]);for(e=0;e<a.ln;e++)a.cg.eq(e).css(u,f[e])}else{O[a.id]="";for(e in a.c)c=a.c[e][u](),O[a.id]+=c+";",d+=c;O[a.id]+=d}}function b(b){var e=">thead>tr>",f='"></div>',g=">tbody>tr:first>",i=">tr:first>",j="td",k="th",l=b.find(e+k+","+e+j);l.length||(l=b.find(g+k+","+i+k+","+g+j+","+i+j));b.cg=b.find("col");b.ln=l.length;b.p&&O&&O[b.id]&&c(b,l);l.each(function(c){var d=a(this),e=a(b.gc[z](w+"CRG"+f)[0].lastChild);e.t=b;e.i=c;e.c=d;d.w=d[u]();b.g[y](e);b.c[y](d);d[u](d.w)[C](u);if(c<b.ln-1)e.mousedown(h)[z](b.opt.gripInnerHtml)[z](w+q+'" style="cursor:'+b.opt.hoverCursor+f);else e[B]("CRL")[A]("CRG");e.data(q,{i:c,t:b[v](o)})});b.cg[C](u);d(b);b.find("td, th").not(l).not(N+"th, table td").each(function(){a(this)[C](u)})}var i=a(document),j=!1,k=null,l=k,m=[],n=0,o="id",p="px",q="CRZ",r=parseInt,s=Math,t=a.browser.msie,u="width",v="attr",w='<div class="',x="<style type='text/css'>",y="push",z="append",A="removeClass",B="addClass",C="removeAttr",D="bind",E="mousemove.",F="mouseup.",G="currentTarget",H="left",I="position",J="}</style>",K="!important;",L=":0px"+K,M="resize",N="table",O,P=a("head")[z](x+".CRC{height:0px;"+I+":relative;}.CRG{margin-left:-5px;"+I+":absolute;z-index:5;}.CRG .CRZ{"+I+":absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;top:0px}.CRL{"+I+":absolute;width:1px}.CRD{ border-left:1px dotted black"+J);try{O=sessionStorage}catch(Q){}a(window)[D](M+"."+q,function(){for(a in m){var a=m[a],b,c=0;a[A](q);if(a.w!=a[u]()){a.w=a[u]();for(b=0;b<a.ln;b++)c+=a.c[b].w;for(b=0;b<a.ln;b++)a.c[b].css(u,s.round(1e3*a.c[b].w/c)/10+"%").l=1}d(a[B](q))}});a.fn.extend({colResizable:function(c){c=a.extend({draggingClass:"CRD",gripInnerHtml:"",liveDrag:j,minWidth:15,headerOnly:j,hoverCursor:"e-"+M,dragCursor:"e-"+M,postbackSafe:j,flush:j,marginLeft:k,marginRight:k,disable:j,onDrag:k,onResize:k},c);return this.each(function(){var d=c,e=a(this);if(d.disable){if(e=e[v](o),(d=m[e])&&d.is(N))d[A](q).gc.remove(),delete m[e]}else{var f=e.id=e[v](o)||q+n++;e.p=d.postbackSafe;if(e.is(N)&&!m[f])e[B](q)[v](o,f).before(w+'CRC"/>'),e.opt=d,e.g=[],e.c=[],e.w=e[u](),e.gc=e.prev(),d.marginLeft&&e.gc.css("marginLeft",d.marginLeft),d.marginRight&&e.gc.css("marginRight",d.marginRight),e.cs=r(t?this.cellSpacing||this.currentStyle.borderSpacing:e.css("border-spacing"))||2,e.b=r(t?this.border||this.currentStyle.borderLeftWidth:e.css("border-"+H+"-"+u))||1,m[f]=e,b(e)}})}})})(jQuery); 
/**
 * jQuery TextExt Plugin
 * http://textextjs.com
 *
 * @version 1.3.1
 * @copyright Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 * @license MIT License
 */
;(function(a,b){function c(){}function d(){}function e(){}function x(a,b){typeof b=="string"&&(b=b.split("."));var c=b.join(".").replace(/\.(\w)/g,function(a,b){return b.toUpperCase()}),d=b.shift(),e;return typeof (e=a[c])!=i?e=e:typeof (e=a[d])!=i&&b.length>0&&(e=x(e,b)),e}function y(){function e(a,d){c.bind(a,function(){return d.apply(b,arguments)})}var a=g.apply(arguments),b=this,c=a.length===1?b:a.shift(),d;a=a[0]||{};for(d in a)e(d,a[d])}function z(a,b){return{input:a,form:b}}var f=(JSON||{}).stringify,g=Array.prototype.slice,h,i="undefined",j="item.manager",k="plugins",l="ext",m="html.wrap",n="html.hidden",o="keys",p="preInvalidate",q="postInvalidate",r="getFormData",s="setFormData",t="setInputData",u="postInit",v="ready",w={itemManager:d,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!f)throw new Error("JSON.stringify() not found");h=d.prototype,h.init=function(a){},h.filter=function(a,b){var c=[],d,e;for(d=0;d<a.length;d++)e=a[d],this.itemContains(e,b)&&c.push(e);return c},h.itemContains=function(a,b){return this.itemToString(a).toLowerCase().indexOf(b.toLowerCase())==0},h.stringToItem=function(a){return a},h.itemToString=function(a){return a},h.compareItems=function(a,b){return a==b},h=c.prototype,h.init=function(b,c){var d=this,e,f,g;d._defaults=a.extend({},w),d._opts=c||{},d._plugins={},d._itemManager=f=new(d.opts(j)),b=a(b),g=a(d.opts(m)),e=a(d.opts(n)),b.wrap(g).keydown(function(a){return d.onKeyDown(a)}).keyup(function(a){return d.onKeyUp(a)}).data("textext",d),a(d).data({hiddenInput:e,wrapElement:b.parents(".text-wrap").first(),input:b}),e.attr("name",b.attr("name")),b.attr("name",null),e.insertAfter(b),a.extend(!0,f,d.opts(l+".item.manager")),a.extend(!0,d,d.opts(l+".*"),d.opts(l+".core")),d.originalWidth=b.outerWidth(),d.invalidateBounds(),f.init(d),d.initPatches(),d.initPlugins(d.opts(k),a.fn.textext.plugins),d.on({setFormData:d.onSetFormData,getFormData:d.onGetFormData,setInputData:d.onSetInputData,anyKeyUp:d.onAnyKeyUp}),d.trigger(u),d.trigger(v),d.getFormData(0)},h.initPatches=function(){var b=[],c=a.fn.textext.patches,d;for(d in c)b.push(d);this.initPlugins(b,c)},h.initPlugins=function(b,c){var d=this,e,f,g,h=[],i;typeof b=="string"&&(b=b.split(/\s*,\s*|\s+/g));for(i=0;i<b.length;i++)f=b[i],g=c[f],g&&(d._plugins[f]=g=new g,d[f]=function(a){return function(){return a}}(g),h.push(g),a.extend(!0,g,d.opts(l+".*"),d.opts(l+"."+f)));h.sort(function(a,b){return a=a.initPriority(),b=b.initPriority(),a===b?0:a<b?1:-1});for(i=0;i<h.length;i++)h[i].init(d)},h.hasPlugin=function(a){return!!this._plugins[a]},h.on=y,h.bind=function(a,b){this.input().bind(a,b)},h.trigger=function(){var a=arguments;this.input().trigger(a[0],g.call(a,1))},h.itemManager=function(){return this._itemManager},h.input=function(){return a(this).data("input")},h.opts=function(a){var b=x(this._opts,a);return typeof b=="undefined"?x(this._defaults,a):b},h.wrapElement=function(){return a(this).data("wrapElement")},h.invalidateBounds=function(){var a=this,b=a.input(),c=a.wrapElement(),d=c.parent(),e=a.originalWidth+"px",f;a.trigger(p),f=b.outerHeight()+"px",b.css({width:e}),c.css({width:e,height:f}),d.css({height:f}),a.trigger(q)},h.focusInput=function(){this.input()[0].focus()},h.serializeData=f,h.hiddenInput=function(b){return a(this).data("hiddenInput")},h.getWeightedEventResponse=function(a,b){var c=this,d={},e=0;c.trigger(a,d,b);for(var f in d)e=Math.max(e,f);return d[e]},h.getFormData=function(a){var b=this,c=b.getWeightedEventResponse(r,a||0);b.trigger(s,c.form),b.trigger(t,c.input)},h.onAnyKeyUp=function(a,b){this.getFormData(b)},h.onSetInputData=function(a,b){this.input().val(b)},h.onSetFormData=function(a,b){var c=this;c.hiddenInput().val(c.serializeData(b))},h.onGetFormData=function(a,b){var c=this.input().val();b[0]=z(c,c)},a(["Down","Up"]).each(function(){var a=this.toString();h["onKey"+a]=function(b){var c=this,d=c.opts(o)[b.keyCode],e=!0;return d&&(e=d.substr(-1)!="!",d=d.replace("!",""),c.trigger(d+"Key"+a),a=="Up"&&c._lastKeyDown==b.keyCode&&(c._lastKeyDown=null,c.trigger(d+"KeyPress")),a=="Down"&&(c._lastKeyDown=b.keyCode)),c.trigger("anyKey"+a,b.keyCode),e}}),h=e.prototype,h.on=y,h.formDataObject=z,h.init=function(a){throw new Error("Not implemented")},h.baseInit=function(b,c){var d=this;b._defaults=a.extend(!0,b._defaults,c),d._core=b,d._timers={}},h.startTimer=function(a,b,c){var d=this;d.stopTimer(a),d._timers[a]=setTimeout(function(){delete d._timers[a],c.apply(d)},b*1e3)},h.stopTimer=function(a){clearTimeout(this._timers[a])},h.core=function(){return this._core},h.opts=function(a){return this.core().opts(a)},h.itemManager=function(){return this.core().itemManager()},h.input=function(){return this.core().input()},h.val=function(a){var b=this.input();if(typeof a===i)return b.val();b.val(a)},h.trigger=function(){var a=this.core();a.trigger.apply(a,arguments)},h.bind=function(a,b){this.core().bind(a,b)},h.initPriority=function(){return 0};var A=!1,B=a.fn.textext=function(b){var d;return!A&&(d=a.fn.textext.css)!=null&&(a("head").append("<style>"+d+"</style>"),A=!0),this.map(function(){var d=a(this);if(b==null)return d.data("textext");var e=new c;return e.init(d,b),d.data("textext",e),e.input()[0]})};B.addPlugin=function(a,b){B.plugins[a]=b,b.prototype=new B.TextExtPlugin},B.addPatch=function(a,b){B.patches[a]=b,b.prototype=new B.TextExtPlugin},B.TextExt=c,B.TextExtPlugin=e,B.ItemManager=d,B.plugins={},B.patches={}})(jQuery),function(a){function b(){}a.fn.textext.TextExtIE9Patches=b,a.fn.textext.addPatch("ie9",b);var c=b.prototype;c.init=function(a){if(navigator.userAgent.indexOf("MSIE 9")==-1)return;var b=this;a.on({postInvalidate:b.onPostInvalidate})},c.onPostInvalidate=function(){var a=this,b=a.input(),c=b.val();b.val(Math.random()),b.val(c)}}(jQuery);(function(a){function b(){}a.fn.textext.TextExtAjax=b,a.fn.textext.addPlugin("ajax",b);var c=b.prototype,d="ajax.data.callback",e="ajax.cache.results",f="ajax.loading.delay",g="ajax.loading.message",h="ajax.type.delay",i="setSuggestions",j="showDropdown",k="loading",l={ajax:{typeDelay:.5,loadingMessage:"Loading...",loadingDelay:.5,cacheResults:!1,dataCallback:null}};c.init=function(a){var b=this;b.baseInit(a,l),b.on({getSuggestions:b.onGetSuggestions}),b._suggestions=null},c.load=function(b){var c=this,e=c.opts(d)||function(a){return{q:a}},f;f=a.extend(!0,{data:e(b),success:function(a){c.onComplete(a,b)},error:function(a,c){console.error(c,b)}},c.opts("ajax")),a.ajax(f)},c.onComplete=function(a,b){var c=this,d=a;c.dontShowLoading(),c.opts(e)==1&&(c._suggestions=a,d=c.itemManager().filter(a,b)),c.trigger(i,{result:d})},c.dontShowLoading=function(){this.stopTimer(k)},c.showLoading=function(){var a=this;a.dontShowLoading(),a.startTimer(k,a.opts(f),function(){a.trigger(j,function(b){b.clearItems();var c=b.addDropdownItem(a.opts(g));c.addClass("text-loading")})})},c.onGetSuggestions=function(a,b){var c=this,d=c._suggestions,f=(b||{}).query||"";if(d&&c.opts(e)===!0)return c.onComplete(d,f);c.startTimer("ajax",c.opts(h),function(){c.showLoading(),c.load(f)})}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtArrow=b,a.fn.textext.addPlugin("arrow",b);var c=b.prototype,d="html.arrow",e={html:{arrow:'<div class="text-arrow"/>'}};c.init=function(b){var c=this,f;c.baseInit(b,e),c._arrow=f=a(c.opts(d)),c.core().wrapElement().append(f),f.bind("click",function(a){c.onArrowClick(a)})},c.onArrowClick=function(a){this.trigger("toggleDropdown"),this.core().focusInput()}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtAutocomplete=b,a.fn.textext.addPlugin("autocomplete",b);var c=b.prototype,d=".",e="text-selected",f=d+e,g="text-suggestion",h=d+g,i="text-label",j=d+i,k="autocomplete.enabled",l="autocomplete.dropdown.position",m="autocomplete.dropdown.maxHeight",n="autocomplete.render",o="html.dropdown",p="html.suggestion",q="hideDropdown",r="showDropdown",s="getSuggestions",t="getFormData",u="toggleDropdown",v="above",w="below",x="mousedownOnAutocomplete",y={autocomplete:{enabled:!0,dropdown:{position:w,maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};c.init=function(b){var c=this;c.baseInit(b,y);var d=c.input(),e;c.opts(k)===!0&&(c.on({blur:c.onBlur,anyKeyUp:c.onAnyKeyUp,deleteKeyUp:c.onAnyKeyUp,backspaceKeyPress:c.onBackspaceKeyPress,enterKeyPress:c.onEnterKeyPress,escapeKeyPress:c.onEscapeKeyPress,setSuggestions:c.onSetSuggestions,showDropdown:c.onShowDropdown,hideDropdown:c.onHideDropdown,toggleDropdown:c.onToggleDropdown,postInvalidate:c.positionDropdown,getFormData:c.onGetFormData,downKeyDown:c.onDownKeyDown,upKeyDown:c.onUpKeyDown}),e=a(c.opts(o)),e.insertAfter(d),c.on(e,{mouseover:c.onMouseOver,mousedown:c.onMouseDown,click:c.onClick}),e.css("maxHeight",c.opts(m)).addClass("text-position-"+c.opts(l)),a(c).data("container",e),a(document.body).click(function(a){c.isDropdownVisible()&&!c.withinWrapElement(a.target)&&c.trigger(q)}),c.positionDropdown())},c.containerElement=function(){return a(this).data("container")},c.onMouseOver=function(b){var c=this,d=a(b.target);d.is(h)&&(c.clearSelected(),d.addClass(e))},c.onMouseDown=function(a){this.containerElement().data(x,!0)},c.onClick=function(b){var c=this,d=a(b.target);(d.is(h)||d.is(j))&&c.trigger("enterKeyPress"),c.core().hasPlugin("tags")&&c.val("")},c.onBlur=function(a){var b=this,c=b.containerElement(),d=c.data(x)===!0;b.isDropdownVisible()&&(d?b.core().focusInput():b.trigger(q)),c.removeData(x)},c.onBackspaceKeyPress=function(a){var b=this,c=b.val().length>0;(c||b.isDropdownVisible())&&b.getSuggestions()},c.onAnyKeyUp=function(a,b){var c=this,d=c.opts("keys."+b)!=null;c.val().length>0&&!d&&c.getSuggestions()},c.onDownKeyDown=function(a){var b=this;b.isDropdownVisible()?b.toggleNextSuggestion():b.getSuggestions()},c.onUpKeyDown=function(a){this.togglePreviousSuggestion()},c.onEnterKeyPress=function(a){var b=this;b.isDropdownVisible()&&b.selectFromDropdown()},c.onEscapeKeyPress=function(a){var b=this;b.isDropdownVisible()&&b.trigger(q)},c.positionDropdown=function(){var a=this,b=a.containerElement(),c=a.opts(l),d=a.core().wrapElement().outerHeight(),e={};e[c===v?"bottom":"top"]=d+"px",b.css(e)},c.suggestionElements=function(){return this.containerElement().find(h)},c.setSelectedSuggestion=function(b){if(!b)return;var c=this,d=c.suggestionElements(),f=d.first(),h,i;c.clearSelected();for(i=0;i<d.length;i++){h=a(d[i]);if(c.itemManager().compareItems(h.data(g),b)){f=h.addClass(e);break}}f.addClass(e),c.scrollSuggestionIntoView(f)},c.selectedSuggestionElement=function(){return this.suggestionElements().filter(f).first()},c.isDropdownVisible=function(){return this.containerElement().is(":visible")===!0},c.onGetFormData=function(a,b,c){var d=this,e=d.val(),f=e,g=e;b[100]=d.formDataObject(f,g)},c.initPriority=function(){return 200},c.onHideDropdown=function(a){this.hideDropdown()},c.onToggleDropdown=function(a){var b=this;b.trigger(b.containerElement().is(":visible")?q:r)},c.onShowDropdown=function(b,c){var d=this,e=d.selectedSuggestionElement().data(g),f=d._suggestions;if(!f)return d.trigger(s);a.isFunction(c)?c(d):(d.renderSuggestions(d._suggestions),d.toggleNextSuggestion()),d.showDropdown(d.containerElement()),d.setSelectedSuggestion(e)},c.onSetSuggestions=function(a,b){var c=this,d=c._suggestions=b.result;b.showHideDropdown!==!1&&c.trigger(d===null||d.length===0?q:r)},c.getSuggestions=function(){var a=this,b=a.val();if(a._previousInputValue==b)return;b==""&&(current=null),a._previousInputValue=b,a.trigger(s,{query:b})},c.clearItems=function(){this.containerElement().find(".text-list").children().remove()},c.renderSuggestions=function(b){var c=this;c.clearItems(),a.each(b||[],function(a,b){c.addSuggestion(b)})},c.showDropdown=function(){this.containerElement().show()},c.hideDropdown=function(){var a=this,b=a.containerElement();a._previousInputValue=null,b.hide()},c.addSuggestion=function(a){var b=this,c=b.opts(n),d=b.addDropdownItem(c?c.call(b,a):b.itemManager().itemToString(a));d.data(g,a)},c.addDropdownItem=function(b){var c=this,d=c.containerElement().find(".text-list"),e=a(c.opts(p));return e.find(".text-label").html(b),d.append(e),e},c.clearSelected=function(){this.suggestionElements().removeClass(e)},c.toggleNextSuggestion=function(){var a=this,b=a.selectedSuggestionElement(),c;b.length>0?(c=b.next(),c.length>0&&b.removeClass(e)):c=a.suggestionElements().first(),c.addClass(e),a.scrollSuggestionIntoView(c)},c.togglePreviousSuggestion=function(){var a=this,b=a.selectedSuggestionElement(),c=b.prev();if(c.length==0)return;a.clearSelected(),c.addClass(e),a.scrollSuggestionIntoView(c)},c.scrollSuggestionIntoView=function(a){var b=a.outerHeight(),c=this.containerElement(),d=c.innerHeight(),e=c.scrollTop(),f=(a.position()||{}).top,g=null,h=parseInt(c.css("paddingTop"));if(f==null)return;f+b>d&&(g=f+e+b-d+h),f<0&&(g=f+e-h),g!=null&&c.scrollTop(g)},c.selectFromDropdown=function(){var a=this,b=a.selectedSuggestionElement().data(g);b&&(a.val(a.itemManager().itemToString(b)),a.core().getFormData()),a.trigger(q)},c.withinWrapElement=function(a){return this.core().wrapElement().find(a).size()>0}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtFilter=b,a.fn.textext.addPlugin("filter",b);var c=b.prototype,d="filter.enabled",e="filter.items",f={filter:{enabled:!0,items:null}};c.init=function(a){var b=this;b.baseInit(a,f),b.on({getFormData:b.onGetFormData,isTagAllowed:b.onIsTagAllowed,setSuggestions:b.onSetSuggestions}),b._suggestions=null},c.onGetFormData=function(a,b,c){var d=this,e=d.val(),f=e,g="";d.core().hasPlugin("tags")||(d.isValueAllowed(f)&&(g=e),b[300]=d.formDataObject(f,g))},c.isValueAllowed=function(a){var b=this,c=b.opts("filterItems")||b._suggestions||[],e=b.itemManager(),f=!b.opts(d),g;for(g=0;g<c.length&&!f;g++)e.compareItems(a,c[g])&&(f=!0);return f},c.onIsTagAllowed=function(a,b){b.result=this.isValueAllowed(b.tag)},c.onSetSuggestions=function(a,b){this._suggestions=b.result}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtFocus=b,a.fn.textext.addPlugin("focus",b);var c=b.prototype,d="html.focus",e={html:{focus:'<div class="text-focus"/>'}};c.init=function(a){var b=this;b.baseInit(a,e),b.core().wrapElement().append(b.opts(d)),b.on({blur:b.onBlur,focus:b.onFocus}),b._timeoutId=0},c.onBlur=function(a){var b=this;clearTimeout(b._timeoutId),b._timeoutId=setTimeout(function(){b.getFocus().hide()},100)},c.onFocus=function(a){var b=this;clearTimeout(b._timeoutId),b.getFocus().show()},c.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtPrompt=b,a.fn.textext.addPlugin("prompt",b);var c=b.prototype,d="text-hide-prompt",e="prompt",f="html.prompt",g={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};c.init=function(b){var c=this,d="placeholder",h,i;c.baseInit(b,g),h=a(c.opts(f)),a(c).data("container",h),c.core().wrapElement().append(h),c.setPrompt(c.opts(e)),i=b.input().attr(d),i||(i=c.opts(e)),b.input().attr(d,""),i&&c.setPrompt(i),a.trim(c.val()).length>0&&c.hidePrompt(),c.on({blur:c.onBlur,focus:c.onFocus,postInvalidate:c.onPostInvalidate,postInit:c.onPostInit})},c.onPostInit=function(a){this.invalidateBounds()},c.onPostInvalidate=function(a){this.invalidateBounds()},c.invalidateBounds=function(){var a=this,b=a.input();a.containerElement().css({paddingLeft:b.css("paddingLeft"),paddingTop:b.css("paddingTop")})},c.onBlur=function(a){var b=this;b.startTimer("prompt",.1,function(){b.showPrompt()})},c.showPrompt=function(){var b=this,c=b.input();a.trim(b.val()).length===0&&!c.is(":focus")&&b.containerElement().removeClass(d)},c.hidePrompt=function(){this.stopTimer("prompt"),this.containerElement().addClass(d)},c.onFocus=function(a){this.hidePrompt()},c.setPrompt=function(a){this.containerElement().text(a)},c.containerElement=function(){return a(this).data("container")}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtSuggestions=b,a.fn.textext.addPlugin("suggestions",b);var c=b.prototype,d="suggestions",e={suggestions:null};c.init=function(a){var b=this;b.baseInit(a,e),b.on({getSuggestions:b.onGetSuggestions,postInit:b.onPostInit})},c.setSuggestions=function(a,b){this.trigger("setSuggestions",{result:a,showHideDropdown:b!=0})},c.onPostInit=function(a){var b=this;b.setSuggestions(b.opts(d),!1)},c.onGetSuggestions=function(a,b){var c=this,e=c.opts(d);e.sort(),c.setSuggestions(c.itemManager().filter(e,b.query))}})(jQuery);(function(a){function b(){}a.fn.textext.TextExtTags=b,a.fn.textext.addPlugin("tags",b);var c=b.prototype,d=".",e="text-tags-on-top",f=d+e,g="text-tag",h=d+g,i="text-tags",j=d+i,k="text-label",l=d+k,m="text-remove",n=d+m,o="tags.enabled",p="tags.items",q="html.tag",r="html.tags",s="isTagAllowed",t="tagClick",u={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};c.init=function(b){this.baseInit(b,u);var c=this,d=c.input(),e;c.opts(o)&&(e=a(c.opts(r)),d.after(e),a(c).data("container",e),c.on({enterKeyPress:c.onEnterKeyPress,backspaceKeyDown:c.onBackspaceKeyDown,preInvalidate:c.onPreInvalidate,postInit:c.onPostInit,getFormData:c.onGetFormData}),c.on(e,{click:c.onClick,mousemove:c.onContainerMouseMove}),c.on(d,{mousemove:c.onInputMouseMove})),c._originalPadding={left:parseInt(d.css("paddingLeft")||0),top:parseInt(d.css("paddingTop")||0)},c._paddingBox={left:0,top:0},c.updateFormCache()},c.containerElement=function(){return a(this).data("container")},c.onPostInit=function(a){var b=this;b.addTags(b.opts(p))},c.onGetFormData=function(a,b,c){var d=this,e=c===13?"":d.val(),f=d._formData;b[200]=d.formDataObject(e,f)},c.initPriority=function(){return 100},c.onInputMouseMove=function(a){this.toggleZIndex(a)},c.onContainerMouseMove=function(a){this.toggleZIndex(a)},c.onBackspaceKeyDown=function(a){var b=this,c=b.tagElements().last();b.val().length==0&&b.removeTag(c)},c.onPreInvalidate=function(a){var b=this,c=b.tagElements().last(),d=c.position();c.length>0?d.left+=c.innerWidth():d=b._originalPadding,b._paddingBox=d,b.input().css({paddingLeft:d.left,paddingTop:d.top})},c.onClick=function(b){function k(a,b){i.data(g,a),i.find(l).text(c.itemManager().itemToString(a)),c.updateFormCache(),d.getFormData(),d.invalidateBounds(),b&&d.focusInput()}var c=this,d=c.core(),e=a(b.target),f=0,i;e.is(j)?f=1:e.is(n)?(c.removeTag(e.parents(h+":first")),f=1):e.is(l)&&(i=e.parents(h+":first"),c.trigger(t,i,i.data(g),k)),f&&d.focusInput()},c.onEnterKeyPress=function(a){var b=this,c=b.val(),d=b.itemManager().stringToItem(c);b.isTagAllowed(d)&&(b.addTags([d]),b.core().focusInput())},c.updateFormCache=function(){var b=this,c=[];b.tagElements().each(function(){c.push(a(this).data(g))}),b._formData=c},c.toggleZIndex=function(a){var b=this,c=b.input().offset(),d=a.clientX-c.left,g=a.clientY-c.top,h=b._paddingBox,i=b.containerElement(),j=i.is(f),k=d>h.left&&g>h.top;(!j&&!k||j&&k)&&i[(j?"remove":"add")+"Class"](e)},c.tagElements=function(){return this.containerElement().find(h)},c.isTagAllowed=function(a){var b={tag:a,result:!0};return this.trigger(s,b),b.result===!0},c.addTags=function(a){if(!a||a.length==0)return;var b=this,c=b.core(),d=b.containerElement(),e,f;for(e=0;e<a.length;e++)f=a[e],f&&b.isTagAllowed(f)&&d.append(b.renderTag(f));b.updateFormCache(),c.getFormData(),c.invalidateBounds()},c.getTagElement=function(b){var c=this,d=c.tagElements(),e,f;for(e=0;e<d.length,f=a(d[e]);e++)if(c.itemManager().compareItems(f.data(g),b))return f},c.removeTag=function(b){var c=this,d=c.core(),e;b instanceof a?(e=b,b=b.data(g)):e=c.getTagElement(b),e.remove(),c.updateFormCache(),d.getFormData(),d.invalidateBounds()},c.renderTag=function(b){var c=this,d=a(c.opts(q));return d.find(".text-label").text(c.itemManager().itemToString(b)),d.data(g,b),d}})(jQuery); 
(function(d,f,g,b){var e="tooltipster",c={animation:"fade",arrow:true,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionBefore:function(l,m){m()},functionReady:function(l,m){},functionAfter:function(l){},icon:"(?)",iconDesktop:false,iconTouch:false,iconTheme:".tooltipster-icon",interactive:false,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:true,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:true,trigger:"hover",updateAnimation:true};function h(m,l){this.element=m;this.options=d.extend({},c,l);this._defaults=c;this._name=e;this.init()}function j(){return !!("ontouchstart" in f)}function a(){var l=g.body||g.documentElement;var n=l.style;var o="transition";if(typeof n[o]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],o=o.charAt(0).toUpperCase()+o.substr(1);for(var m=0;m<v.length;m++){if(typeof n[v[m]+o]=="string"){return true}}return false}var k=true;if(!a()){k=false}h.prototype={init:function(){var r=d(this.element);var n=this;var q=true;if((n.options.touchDevices==false)&&(j())){q=false}if(g.all&&!g.querySelector){q=false}if(q==true){if((this.options.iconDesktop==true)&&(!j())||((this.options.iconTouch==true)&&(j()))){var m=r.attr("title");r.removeAttr("title");var p=n.options.iconTheme;var o=d('<span class="'+p.replace(".","")+'" title="'+m+'">'+this.options.icon+"</span>");o.insertAfter(r);r.data("tooltipsterIcon",o);r=o}var l=d.trim(n.options.content).length>0?n.options.content:r.attr("title");r.data("tooltipsterContent",l);r.removeAttr("title");if((this.options.touchDevices==true)&&(j())){r.bind("touchstart",function(t,s){n.showTooltip()})}else{if(this.options.trigger=="hover"){r.on("mouseenter.tooltipster",function(){n.showTooltip()});if(this.options.interactive==true){r.on("mouseleave.tooltipster",function(){var t=r.data("tooltipster");var u=false;if((t!==b)&&(t!=="")){t.mouseenter(function(){u=true});t.mouseleave(function(){u=false});var s=setTimeout(function(){if(u==true){t.mouseleave(function(){n.hideTooltip()})}else{n.hideTooltip()}},n.options.interactiveTolerance)}else{n.hideTooltip()}})}else{r.on("mouseleave.tooltipster",function(){n.hideTooltip()})}}if(this.options.trigger=="click"){r.on("click.tooltipster",function(){if((r.data("tooltipster")=="")||(r.data("tooltipster")==b)){n.showTooltip()}else{n.hideTooltip()}})}}}},showTooltip:function(m){var n=d(this.element);var l=this;if(n.data("tooltipsterIcon")!==b){n=n.data("tooltipsterIcon")}if(!n.hasClass("tooltipster-disable")){if((d(".tooltipster-base").not(".tooltipster-dying").length>0)&&(l.options.onlyOne==true)){d(".tooltipster-base").not(".tooltipster-dying").not(n.data("tooltipster")).each(function(){d(this).addClass("tooltipster-kill");var o=d(this).data("origin");o.data("plugin_tooltipster").hideTooltip()})}n.clearQueue().delay(l.options.delay).queue(function(){l.options.functionBefore(n,function(){if((n.data("tooltipster")!==b)&&(n.data("tooltipster")!=="")){var w=n.data("tooltipster");if(!w.hasClass("tooltipster-kill")){var s="tooltipster-"+l.options.animation;w.removeClass("tooltipster-dying");if(k==true){w.clearQueue().addClass(s+"-show")}if(l.options.timer>0){var q=w.data("tooltipsterTimer");clearTimeout(q);q=setTimeout(function(){w.data("tooltipsterTimer",b);l.hideTooltip()},l.options.timer);w.data("tooltipsterTimer",q)}if((l.options.touchDevices==true)&&(j())){d("body").bind("touchstart",function(B){if(l.options.interactive==true){var D=d(B.target);var C=true;D.parents().each(function(){if(d(this).hasClass("tooltipster-base")){C=false}});if(C==true){l.hideTooltip();d("body").unbind("touchstart")}}else{l.hideTooltip();d("body").unbind("touchstart")}})}}}else{d("body").css("overflow-x","hidden");var x=n.data("tooltipsterContent");var u=l.options.theme;var y=u.replace(".","");var s="tooltipster-"+l.options.animation;var r="-webkit-transition-duration: "+l.options.speed+"ms; -webkit-animation-duration: "+l.options.speed+"ms; -moz-transition-duration: "+l.options.speed+"ms; -moz-animation-duration: "+l.options.speed+"ms; -o-transition-duration: "+l.options.speed+"ms; -o-animation-duration: "+l.options.speed+"ms; -ms-transition-duration: "+l.options.speed+"ms; -ms-animation-duration: "+l.options.speed+"ms; transition-duration: "+l.options.speed+"ms; animation-duration: "+l.options.speed+"ms;";var o=l.options.fixedWidth>0?"width:"+l.options.fixedWidth+"px;":"";var z=l.options.maxWidth>0?"max-width:"+l.options.maxWidth+"px;":"";var t=l.options.interactive==true?"pointer-events: auto;":"";var w=d('<div class="tooltipster-base '+y+" "+s+'" style="'+o+" "+z+" "+t+" "+r+'"><div class="tooltipster-content">'+x+"</div></div>");w.appendTo("body");n.data("tooltipster",w);w.data("origin",n);l.positionTooltip();l.options.functionReady(n,w);if(k==true){w.addClass(s+"-show")}else{w.css("display","none").removeClass(s).fadeIn(l.options.speed)}var A=x;var p=setInterval(function(){var B=n.data("tooltipsterContent");if(d("body").find(n).length==0){w.addClass("tooltipster-dying");l.hideTooltip()}else{if((A!==B)&&(B!=="")){A=B;w.find(".tooltipster-content").html(B);if(l.options.updateAnimation==true){if(a()){w.css({width:"","-webkit-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing");setTimeout(function(){w.removeClass("tooltipster-content-changing");setTimeout(function(){w.css({"-webkit-transition":l.options.speed+"ms","-moz-transition":l.options.speed+"ms","-o-transition":l.options.speed+"ms","-ms-transition":l.options.speed+"ms",transition:l.options.speed+"ms"})},l.options.speed)},l.options.speed)}else{w.fadeTo(l.options.speed,0.5,function(){w.fadeTo(l.options.speed,1)})}}l.positionTooltip()}}if((d("body").find(w).length==0)||(d("body").find(n).length==0)){clearInterval(p)}},200);if(l.options.timer>0){var q=setTimeout(function(){w.data("tooltipsterTimer",b);l.hideTooltip()},l.options.timer+l.options.speed);w.data("tooltipsterTimer",q)}if((l.options.touchDevices==true)&&(j())){d("body").bind("touchstart",function(B){if(l.options.interactive==true){var D=d(B.target);var C=true;D.parents().each(function(){if(d(this).hasClass("tooltipster-base")){C=false}});if(C==true){l.hideTooltip();d("body").unbind("touchstart")}}else{l.hideTooltip();d("body").unbind("touchstart")}})}w.mouseleave(function(){l.hideTooltip()})}});n.dequeue()})}},hideTooltip:function(m){var p=d(this.element);var l=this;if(p.data("tooltipsterIcon")!==b){p=p.data("tooltipsterIcon")}var o=p.data("tooltipster");if(o==b){o=d(".tooltipster-dying")}p.clearQueue();if((o!==b)&&(o!=="")){var q=o.data("tooltipsterTimer");if(q!==b){clearTimeout(q)}var n="tooltipster-"+l.options.animation;if(k==true){o.clearQueue().removeClass(n+"-show").addClass("tooltipster-dying").delay(l.options.speed).queue(function(){o.remove();p.data("tooltipster","");d("body").css("verflow-x","");l.options.functionAfter(p)})}else{o.clearQueue().addClass("tooltipster-dying").fadeOut(l.options.speed,function(){o.remove();p.data("tooltipster","");d("body").css("verflow-x","");l.options.functionAfter(p)})}}},positionTooltip:function(O){var A=d(this.element);var ab=this;if(A.data("tooltipsterIcon")!==b){A=A.data("tooltipsterIcon")}if((A.data("tooltipster")!==b)&&(A.data("tooltipster")!=="")){var ah=A.data("tooltipster");ah.css("width","");var ai=d(f).width();var B=A.outerWidth(false);var ag=A.outerHeight(false);var al=ah.outerWidth(false);var m=ah.innerWidth()+1;var M=ah.outerHeight(false);var aa=A.offset();var Z=aa.top;var u=aa.left;var y=b;if(A.is("area")){var T=A.attr("shape");var af=A.parent().attr("name");var P=d('img[usemap="#'+af+'"]');var n=P.offset().left;var L=P.offset().top;var W=A.attr("coords")!==b?A.attr("coords").split(","):b;if(T=="circle"){var N=parseInt(W[0]);var r=parseInt(W[1]);var D=parseInt(W[2]);ag=D*2;B=D*2;Z=L+r-D;u=n+N-D}else{if(T=="rect"){var N=parseInt(W[0]);var r=parseInt(W[1]);var q=parseInt(W[2]);var J=parseInt(W[3]);ag=J-r;B=q-N;Z=L+r;u=n+N}else{if(T=="poly"){var x=[];var ae=[];var H=0,G=0,ad=0,ac=0;var aj="even";for(i=0;i<W.length;i++){var F=parseInt(W[i]);if(aj=="even"){if(F>ad){ad=F;if(i==0){H=ad}}if(F<H){H=F}aj="odd"}else{if(F>ac){ac=F;if(i==1){G=ac}}if(F<G){G=F}aj="even"}}ag=ac-G;B=ad-H;Z=L+G;u=n+H}else{ag=P.outerHeight(false);B=P.outerWidth(false);Z=L;u=n}}}}if(ab.options.fixedWidth==0){ah.css({width:m+"px","padding-left":"0px","padding-right":"0px"})}var s=0,V=0;var X=parseInt(ab.options.offsetY);var Y=parseInt(ab.options.offsetX);var p="";function w(){var an=d(f).scrollLeft();if((s-an)<0){var am=s-an;s=an;ah.data("arrow-reposition",am)}if(((s+al)-an)>ai){var am=s-((ai+an)-al);s=(ai+an)-al;ah.data("arrow-reposition",am)}}function t(an,am){if(((Z-d(f).scrollTop()-M-X-12)<0)&&(am.indexOf("top")>-1)){ab.options.position=an;y=am}if(((Z+ag+M+12+X)>(d(f).scrollTop()+d(f).height()))&&(am.indexOf("bottom")>-1)){ab.options.position=an;y=am;V=(Z-M)-X-12}}if(ab.options.position=="top"){var Q=(u+al)-(u+B);s=(u+Y)-(Q/2);V=(Z-M)-X-12;w();t("bottom","top")}if(ab.options.position=="top-left"){s=u+Y;V=(Z-M)-X-12;w();t("bottom-left","top-left")}if(ab.options.position=="top-right"){s=(u+B+Y)-al;V=(Z-M)-X-12;w();t("bottom-right","top-right")}if(ab.options.position=="bottom"){var Q=(u+al)-(u+B);s=u-(Q/2)+Y;V=(Z+ag)+X+12;w();t("top","bottom")}if(ab.options.position=="bottom-left"){s=u+Y;V=(Z+ag)+X+12;w();t("top-left","bottom-left")}if(ab.options.position=="bottom-right"){s=(u+B+Y)-al;V=(Z+ag)+X+12;w();t("top-right","bottom-right")}if(ab.options.position=="left"){s=u-Y-al-12;myLeftMirror=u+Y+B+12;var K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X;if((s<0)&&((myLeftMirror+al)>ai)){var o=parseFloat(ah.css("border-width"))*2;var l=(al+s)-o;ah.css("width",l+"px");M=ah.outerHeight(false);s=u-Y-l-12-o;K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X}else{if(s<0){s=u+Y+B+12;ah.data("arrow-reposition","left")}}}if(ab.options.position=="right"){s=u+Y+B+12;myLeftMirror=u-Y-al-12;var K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X;if(((s+al)>ai)&&(myLeftMirror<0)){var o=parseFloat(ah.css("border-width"))*2;var l=(ai-s)-o;ah.css("width",l+"px");M=ah.outerHeight(false);K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X}else{if((s+al)>ai){s=u-Y-al-12;ah.data("arrow-reposition","right")}}}if(ab.options.arrow==true){var I="tooltipster-arrow-"+ab.options.position;if(ab.options.arrowColor.length<1){var R=ah.css("background-color")}else{var R=ab.options.arrowColor}var ak=ah.data("arrow-reposition");if(!ak){ak=""}else{if(ak=="left"){I="tooltipster-arrow-right";ak=""}else{if(ak=="right"){I="tooltipster-arrow-left";ak=""}else{ak="left:"+ak+"px;"}}}if((ab.options.position=="top")||(ab.options.position=="top-left")||(ab.options.position=="top-right")){var U=parseFloat(ah.css("border-bottom-width"));var z=ah.css("border-bottom-color")}else{if((ab.options.position=="bottom")||(ab.options.position=="bottom-left")||(ab.options.position=="bottom-right")){var U=parseFloat(ah.css("border-top-width"));var z=ah.css("border-top-color")}else{if(ab.options.position=="left"){var U=parseFloat(ah.css("border-right-width"));var z=ah.css("border-right-color")}else{if(ab.options.position=="right"){var U=parseFloat(ah.css("border-left-width"));var z=ah.css("border-left-color")}else{var U=parseFloat(ah.css("border-bottom-width"));var z=ah.css("border-bottom-color")}}}}if(U>1){U++}var E="";if(U!==0){var C="";var S="border-color: "+z+";";if(I.indexOf("bottom")!==-1){C="margin-top: -"+U+"px;"}else{if(I.indexOf("top")!==-1){C="margin-bottom: -"+U+"px;"}else{if(I.indexOf("left")!==-1){C="margin-right: -"+U+"px;"}else{if(I.indexOf("right")!==-1){C="margin-left: -"+U+"px;"}}}}E='<span class="tooltipster-arrow-border" style="'+C+" "+S+';"></span>'}ah.find(".tooltipster-arrow").remove();p='<div class="'+I+' tooltipster-arrow" style="'+ak+'">'+E+'<span style="border-color:'+R+';"></span></div>';ah.append(p)}ah.css({top:V+"px",left:s+"px"});if(y!==b){ab.options.position=y}}}};d.fn[e]=function(m){if(typeof m==="string"){var o=this;var l=arguments[1];if(o.data("plugin_tooltipster")==b){var n=o.find("*");o=d();n.each(function(){if(d(this).data("plugin_tooltipster")!==b){o.push(d(this))}})}o.each(function(){switch(m.toLowerCase()){case"show":d(this).data("plugin_tooltipster").showTooltip();break;case"hide":d(this).data("plugin_tooltipster").hideTooltip();break;case"disable":d(this).addClass("tooltipster-disable");break;case"enable":d(this).removeClass("tooltipster-disable");break;case"destroy":d(this).data("plugin_tooltipster").hideTooltip();d(this).data("plugin_tooltipster","").attr("title",o.data("tooltipsterContent")).data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster");break;case"update":d(this).data("tooltipsterContent",l);break;case"reposition":d(this).data("plugin_tooltipster").positionTooltip();break}});return this}return this.each(function(){if(!d.data(this,"plugin_"+e)){d.data(this,"plugin_"+e,new h(this,m))}var p=d(this).data("plugin_tooltipster").options;if((p.iconDesktop==true)&&(!j())||((p.iconTouch==true)&&(j()))){var q=d(this).data("plugin_tooltipster");d(this).next().data("plugin_tooltipster",q)}})};if(j()){f.addEventListener("orientationchange",function(){if(d(".tooltipster-base").length>0){d(".tooltipster-base").each(function(){var l=d(this).data("origin");l.data("plugin_tooltipster").hideTooltip()})}},false)}d(f).on("resize.tooltipster",function(){var l=d(".tooltipster-base").data("origin");if((l!==null)&&(l!==b)){l.tooltipster("reposition")}})})(jQuery,window,document); 
/** jQuery-USOS 0.9.3 -- https://github.com/MUCI/jquery-usos */ 
(function(d){var v="usosApiTable";function w(z,A){this._state=z;this._lastPublishedState=null;this.onStateChanged=A;this.publishState()}w.prototype.publishState=function(A){var z=this.getState();if((!A)&&(z==this.lastPublishedState)){return}this._lastPublishedState=z;this.onStateChanged(z)};w.prototype.getState=function(){return this._state};w.prototype.setState=function(z){this._state=z;this.publishState()};w.prototype.destroy=function(){};function x(B,z,C){this.paramName=B;this._lastPublishedState=null;this.onStateChanged=C;var A=this;d(window).bind("hashchange."+v,function(D){A.publishState()});if(this.getState()===null){this.setState(z)}else{this.publishState()}}x.prototype.publishState=function(A){var z=this.getState();if((!A)&&(z==this.lastPublishedState)){return}this._lastPublishedState=z;this.onStateChanged(z)};x.prototype.getState=function(){var z=d.bbq.getState(this.paramName);if(z){return z}return null};x.prototype.setState=function(A){var z={};z[this.paramName]=A;d.bbq.pushState(z)};x.prototype.destroy=function(){d(window).unbind("hashchange."+v)};var l=function(z){return(d.map(z,function(A){return(A.ascending?"":"-")+A.column})).join("|")};var p=function(z){return d.map(z.split("|"),function(A){return{column:A.replace("-",""),ascending:A[0]!="-"}})};var j=function(A){var z;if(A.currentOrder.length>0){z=A.currentOrder[0]}else{z={column:"",ascending:true}}A.elements.$sorters.each(function(){var B=d(this).data(v);if(B.orderRules[0].column==z.column){B.$img.attr("class",z.ascending?"ua-ascending":"ua-descending");d(this).closest("td").addClass("ua-sorted-by")}else{B.$img.removeClass("ua-ascending ua-descending");d(this).closest("td").removeClass("ua-sorted-by")}})};var n=function(z){return d.extend({},z.settings.params,{order_by:l(z.currentOrder),start:z.currentOffset,num:z.settings.pageLength})};var h=function(E){var A=d("<div>").addClass("ua-container").addClass("ua-table-container");var B=d("<table>").addClass("ua-table");if(E.nowrap){B.addClass("ua-ellipsis-tds")}A.append(B);var D=i(E);B.append(D);var z=d("<tbody>").addClass("ua-contents");B.append(z);var C=a(E);B.append(C);return A};var i=function(A){var z=d("<thead>");var B=d("<tr>");z.append(B);d.each(A.columns,function(C,D){var E=d("<td>");if(D.width){E.css("width",D.width)}if(D.align){E.css("text-align",D.align)}if(D.sortable){E.addClass("ua-sortable");E.append(d("<a>").attr("tabindex",0).addClass("ua-sorter").attr("data-ua-fields",D.field).html(D.label))}else{E.addClass("ua-nonsortable");E.html(D.label)}if(D.cssClass){d.each(D.cssClass.split(" "),function(G,F){if(F){E.addClass(F)}})}B.append(E)});if(A.actions.length>0){B.append(d("<td>").addClass("ua-nonsortable").addClass("ua-actions").css("width",(1+A.actions.length*19)+"px"))}return z};var u=function(z){var A=z.columns.length;if(z.actions.length>0){A++}return A};var s=function(C,B){if(!C.elements.$contents.is(":parent")){C.elements.$contents.html("<tr class='ua-placeholder'><td></td></tr>").find("td").attr("colspan",u(C.settings))}var A=C.elements.$div.find(".ua-overlay-background");if(A.length===0){A=d("<div>").addClass("ua-overlay-background").hide();C.elements.$div.append(A)}var z=C.elements.$div.find(".ua-overlay-foreground");if(z.length===0){z=d("<table>").addClass("ua-overlay-foreground").hide().append(d("<tr>").append(d("<td>")));C.elements.$div.append(z)}z.find("td").empty().append(B.clone());A.css("left",C.elements.$contents.position().left+1).css("top",C.elements.$contents.position().top+1).css("width",C.elements.$contents.width()-1).css("height",C.elements.$contents.height()-1).fadeIn("slow");z.delay(200).each(function(){if(!d.contains(document.documentElement,A[0])){return}z.css(C.elements.$contents.position()).css("width",C.elements.$contents.width()).css("height",C.elements.$contents.height()).fadeIn(500)})};var b=function(z){z.elements.$div.find(".ua-overlay-background").remove();z.elements.$div.find(".ua-overlay-foreground").remove()};var a=function(A){var z=d("<tfoot>").append(d("<tr>").append(d("<td>").attr("colspan",u(A)).append(d("<table>").css("width","100%").append(d("<tr>")))));z.find("table tr").append(d("<td>").css("vertical-align","middle").append(d("<div>").addClass("ua-summary"))).append(d("<td>").append(d("<ul>").addClass("ua-more").append(d("<div>").addClass("ua-prevpage").button({disabled:true,icons:{primary:"ui-icon-carat-1-w"},label:d.usosCore.langSelect("POPRZEDNIA STRONA","PREVIOUS PAGE")})).append(d("<div>").addClass("ua-nextpage").button({disabled:true,icons:{secondary:"ui-icon-carat-1-e"},label:d.usosCore.langSelect("NASTĘPNA STRONA","NEXT PAGE")}))));return z};var q=function(A,z){if(typeof z==="string"){z=d("<span>").text(z)}A.elements.$summary.empty().append(z.clone())};var c=function(z){return d("<td>").addClass("ua-datatype-langdict").append(d.usosCore.langSelect({langdict:z,format:"$span"}))};var r=function(z){var A=d("<td>").addClass("ua-datatype-boolean");if(z){A.addClass("ua-true").text(d.usosCore.langSelect("TAK","YES"))}else{A.addClass("ua-false").text(d.usosCore.langSelect("NIE","NO"))}return A};var g="1";var f=function(z){return(g+","+z.offset+","+l(z.orderRules).replace(/\|/g,","))};var m=function(z){try{var A=z.split(",");if(A[0]=="1"){return{offset:parseInt(A[1],10),orderRules:p(A.slice(2).join("|"))}}else{throw"Unknown serializer version"}}catch(B){d.usosCore.console.error("Could not deserialize apiTable state:",B);return{offset:0,orderRules:[]}}};var k=function(z,A){if(!A.field){return d("<td>").text("Missing 'field' key in column spec.")}var C;var B=z;d.each(A.field.split("."),function(D,E){B=B[E]});if(typeof B==="object"){C=c(B)}else{if(typeof B==="number"){C=d("<td>").addClass("ua-datatype-number").text(B)}else{if(typeof B==="string"){C=d("<td>").addClass("ua-datatype-string").text(B)}else{if(typeof B==="boolean"){C=r(B)}else{if(B===null){C=d("<td>").append(d("<span>").addClass("ua-note").text(d.usosCore.langSelect("(brak danych)","(no data)")))}else{if(B===undefined){C=d("<td>").text("Missing field '"+A.field+"' in data feed.")}else{C=d("<td>").text("Unknown column data type.")}}}}}}return C};var t=function(z){return this.each(function(){var D=d(this);if(D.data(v)){D.usosApiTable("destroy")}D.empty();var F={};D.data(v,F);var B={hashParam:null,sourceId:"default",method:null,params:{},offsetReset:false,columns:null,defaultOrder:null,pageLength:6,actions:[],emptyMessage:{pl:"Brak wyników",en:"No results"},nowrap:true};F.settings=d.extend({},B,z);D.append(h(F.settings));F.elements={$root:D,$div:D.find(".ua-table-container"),$table:D.find(".ua-table"),$summary:D.find(".ua-summary"),$sorters:D.find(".ua-sorter").each(function(){var I=d(this);var H=d("<div>").css("margin-left","3px").hide();I.after(H);var G=d("<span>").addClass("ua-loading").hide();H.after(G);I.data(v,{$img:H,$loader:G,orderRules:p(I.attr("data-ua-fields"))});if(I.parent().hasClass("ua-sortable")){I.parent().click(function(){I.trigger("click")})}}).click(function(){if(!F.initialized){return}var N=d(this).data(v);F.elements.$table.find("thead .ua-loading").hide();N.$loader.show();var M=d.map(N.orderRules,function(Q,P){return Q.column});F.currentOffset=0;var H=true;if(F.currentOrder.length>0&&F.currentOrder[0].column==M[0]&&F.currentOrder[0].ascending===true){H=false}var O=[];var G=[];var J;for(J=0;J<F.currentOrder.length;J++){if(d.inArray(F.currentOrder[J].column,M)!=-1){O[F.currentOrder[J].column]=F.currentOrder[J]}else{G.push(F.currentOrder[J])}}var I=[];for(J=0;J<M.length;J++){var L=null;if(O[M[J]]){L=O[M[J]];L.ascending=H}else{L={column:M[J],ascending:H}}I.push(L)}var K=I;for(J=0;J<G.length;J++){K.push(G[J])}F.stateCoordinator.setState(f({orderRules:K,offset:0}));return false}).keypress(function(G){if(G.which==13){d(this).click()}}),$contents:D.find(".ua-contents"),$prevPage:D.find(".ua-prevpage").click(function(){d(this).button("disable");F.stateCoordinator.setState(f({offset:F.currentOffset-F.settings.pageLength,orderRules:F.currentOrder}))}),$nextPage:D.find(".ua-nextpage").click(function(){d(this).button("disable");F.stateCoordinator.setState(f({offset:F.currentOffset+F.settings.pageLength,orderRules:F.currentOrder}))})};F.syncObject={};F.defaultAction=null;d.each(F.settings.actions,function(G,H){if(H.isDefault){if(F.defaultAction){d.usosCore.console.error("More than one default action defined.");return false}F.defaultAction=H}});F.currentOrder=null;F.currentOffset=0;var A=f({offset:0,orderRules:p(F.settings.defaultOrder)});var E=function(G){F.initialized=true;var H=m(G);F.currentOrder=H.orderRules;F.currentOffset=H.offset;D.usosApiTable("reload")};if(F.settings.hashParam){F.stateCoordinator=new x(F.settings.hashParam,A,E)}else{F.stateCoordinator=new w(A,E)}if(F.settings.offsetReset){var C=m(F.stateCoordinator.getState());C.offset=0;F.stateCoordinator.setState(f(C))}})};var o=function(){return this.each(function(){var z=d(this);var A=z.data(v);d.usosCore.console.log("Reloading with order "+l(A.currentOrder)+"...");j(A);s(A,d("<span>").addClass("ua-loading"));q(A,d("<span>").addClass("ua-loading").text(d.usosCore.langSelect("Wczytywanie...","Loading...")));d.usosCore.usosapiFetch({sourceId:A.settings.sourceId,method:A.settings.method,params:n(A),syncMode:"receiveLast",syncObject:A.syncObject,success:function(C){if(A.destroyed){return}A.elements.$contents.empty();d.each(C.items,function(F,D){var G=d("<tr>");G.data(v,D);d.each(A.settings.columns,function(I,H){var J;if(H.customTdFormatter){J=H.customTdFormatter(D)}else{J=k(D,H)}if(H.cssClass){d.each(H.cssClass.split(" "),function(L,K){if(K){J.addClass(K)}})}if(H.align){J.css("text-align",H.align)}if(A.settings.nowrap){J.on("mouseenter",function(){var M=d(this);if(M.attr("title")){return}var L=false;var K=M.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");L=K.width()>M.width();K.remove();if(L){M.attr("title",M.text())}})}G.append(J)});if(A.settings.actions.length>0){var E=d("<td>").addClass("ua-actions");d.each(A.settings.actions,function(I,J){var H=d("<a>").attr("tabindex",0).addClass("ua-action-icon").append(d("<div>").addClass("ui-icon").addClass(J.iconClass)).attr("title",J.label).click(function(){J.click(D);return false}).keypress(function(K){if(K.which==13){d(this).click()}});if((J.isVisible)&&(!J.isVisible(D))){H.css("visibility","hidden")}E.append(H)});G.append(E)}A.elements.$contents.append(G)});if(A.defaultAction){A.elements.$contents.find("tr").hover(function(){d(this).addClass("ua-hovered")},function(){d(this).removeClass("ua-hovered")}).click(function(){A.defaultAction.click(d(this).data(v))})}A.elements.$nextPage.button(C.next_page?"enable":"disable");A.elements.$prevPage.button(A.currentOffset>0?"enable":"disable");A.elements.$table.colResizable({liveDrag:true,headerOnly:true});A.elements.$table.find("thead .ua-loading").hide();b(A);if(A.currentOffset+C.items.length===0){var B=d("<span>").html(d.usosCore.langSelect(A.settings.emptyMessage));s(A,B);q(A,"")}else{q(A,d.usosCore.langSelect("Pokazywane elementy ","Showing items ")+(A.currentOffset+1)+".."+(A.currentOffset+C.items.length))}},error:function(E,D,C){var B=d("<span>").html(d.usosCore.langSelect("Wystąpił błąd podczas wczytywania. Spróbuj odświeżyć stronę (F5).","There was an error while loading. Try to refresh the page (F5)."));s(A,B);q(A,B.clone(true));A.elements.$table.find("thead .ua-loading").hide()}})})};var y=function(){return this.each(function(){var A=d(this);var z=A.data(v);z.destroyed=true;z.stateCoordinator.destroy();z.elements.$root.find("*").addBack().unbind();A.removeData(v)})};var e={init:t,reload:o,destroy:y};d.fn.usosApiTable=function(z){if(e[z]){return e[z].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof z==="object")||(!z)){return t.apply(this,arguments)}else{d.error("Method "+z+" does not exist on jQuery."+v)}}}})(jQuery);(function(d){var p="usosCore";var s={settings:null};var n=function(t){if(s.settings!==null){d.usosCore.console.error("jQuery.usosCore is already initialized! Subsequent calls to init will be ingored!");return}var u={langpref:"en",usosAPIs:{"default":{methodUrl:null,extraParams:{}}},entityURLs:{user:"auto",faculty:"auto"}};s.settings=d.extend(true,{},u,t)};var i=function(){if(s.settings===null){throw ("Call jQuery.usosCore.init first!")}};var h=function(t){var u={};d.each(t,function(v,w){if(d.isArray(w)){w=w.join("|")}else{if(typeof w!=="string"){w=""+w}}u[v]=w});return u};var e=function(x){i();if(typeof x==="string"){return e({method:arguments[0],params:(arguments.length>=2)?arguments[1]:{}})}var t={sourceId:"default",method:"method_name",params:{},syncMode:"noSync",syncObject:null,success:null,error:null};var w=d.extend({},t,x);if(w.syncMode=="noSync"){if(w.syncObject!==null){throw ("syncObject must stay null if syncMode is 'noSync'")}}else{if((w.syncMode=="receiveLast")||(w.syncMode=="receiveIncrementalFast")){if(w.syncObject===null){throw ("syncObject must be an object if syncMode is other than 'noSync'. Check out the docs!")}}else{throw ("Invalid syncMode: "+w.syncMode)}}var y=null;if(w.syncObject!==null){if(typeof w.syncObject.lastIssuedRequestId==="undefined"){w.syncObject.lastIssuedRequestId=0;w.syncObject.lastReceivedRequestId=0}w.syncObject.lastIssuedRequestId++;y=w.syncObject.lastIssuedRequestId}var v=s.settings.usosAPIs[w.sourceId].methodUrl.replace("%s",w.method);var z=d.extend({},w.params,s.settings.usosAPIs[w.sourceId].extraParams);var u=d.Deferred();d.ajax({type:"POST",url:v,data:h(z),dataType:"json",success:function(B,C,A){if(w.syncObject!==null){if(w.syncObject.lastReceivedRequestId>y){return}if((w.syncMode=="receiveLast")&&y<w.syncObject.lastIssuedRequestId){return}w.syncObject.lastReceivedRequestId=y}if(w.success!==null){w.success(B)}u.resolve(B)},error:function(C,B,A){if(w.syncObject!==null){if(w.syncObject.lastReceivedRequestId>y){return}w.syncObject.lastReceivedRequestId=y}if(w.error!==null){w.error(C,B,A)}u.reject()}});if(w.syncMode=="noSync"){return u.promise()}};var c=function(){i();if(arguments.length==2){if(typeof arguments[0]==="object"){return c({langdict:arguments[0],format:arguments[1]})}else{return c({langdict:{pl:arguments[0],en:arguments[1]},format:"text"})}}if(arguments.length!=1){throw ("Invalid arguments",arguments)}var z=arguments[0];if(z===null){z={langdict:{pl:null,en:null}}}else{if(typeof z==="string"){return z}}if((typeof z.pl!=="undefined")&&(typeof z.en!=="undefined")&&(typeof z.langdict==="undefined")){return c({langdict:z,format:"text"})}var t={langdict:null,langpref:"inherit",format:"text"};var w=d.extend({},t,z);if(w.langpref=="inherit"){w.langpref=s.settings.langpref}var A=w.langpref;var y=w.langdict.pl;var v=w.langdict.en;if(w.format=="text"){var u;if(A=="pl"){if(y){u=y}else{if(v){u="(po angielsku) "+v}else{u="(brak danych)"}}}else{if(v){u=v}else{if(y){u="(in Polish) "+y}else{u="(unknown)"}}}return u}else{if(w.format=="$span"){var x=d("<span>");if(A=="pl"){if(y){x.html(y)}else{if(v){x.append(d("<span>").addClass("ua-note").text("(po angielsku)")).append(" ").append(d("<span>").html(v))}else{x.append(d("<span>").addClass("ua-note").text("(brak danych)"))}}}else{if(v){x.html(v)}else{if(y){x.append(d("<span>").addClass("ua-note").text("(in Polish)")).append(" ").append(d("<span>").html(y))}else{x.append(d("<span>").addClass("ua-note").text("(unknown)"))}}}return x}}};var r=function(t){if(typeof t==="object"){return d.extend(true,{},t)}else{return t}};var g=function(t){var v=[];for(var u=0;u<t.length;u++){v.push(r(t[u]))}return v};var l={};d.each(["log","warn","error","assert"],function(t,u){l[u]=function(){if(window.console&&window.console[u]){Function.prototype.apply.call(window.console[u],window.console,g(arguments))}}});var q=function(){i();return s.settings.langpref};var f=function(){var t=function(x,w){var v=x;d.each(w,function(y,z){v=v[z];if(typeof v==="undefined"){return v}});return v};var u=function(z,y,x){var w=z;var v=y.length-1;d.each(y,function(A,B){if(A==v){w[B]=x}else{if(typeof w[B]==="undefined"){w[B]={}}w=w[B]}})};return function(w,y){var v={};var D=[];var C="";var E=y+"$";for(var z=0;z<E.length;z++){var A=E.charAt(z);if(A=="["||A=="]"||A=="|"||A=="$"){D.push(C);var B=null;if(C!==""){B=t(w,D);if(typeof B==="undefined"){d.usosCore.console.error("Required field "+D.join(".")+" not found.")}}if(A=="["){}else{if(A=="|"||A=="$"){if(C!==""){u(v,D,B)}D.pop()}else{if(A=="]"){if(C!==""){u(v,D,B)}D.pop();D.pop()}}}C=""}else{C+=A}}return v}}();var o=function(){var t=d(this).attr("data-user-id");d.usosCore.usosapiFetch({method:"services/users/user",params:{user_id:t,fields:"profile_url"}}).done(function(u){document.location=u.profile_url})};var m=function(t){t=d.usosCore.filterFields(t,"id|first_name|last_name");var v=d("<a>").attr("class","ua-link").attr("data-user-id",t.id).text(t.first_name+" "+t.last_name);var u=s.settings.entityURLs.user;if(typeof u==="function"){u=u(t.id)}if(u=="auto"){u=o}if(typeof u==="string"){v.attr("href",u.replace("{0}",t.id))}else{if(typeof u==="function"){v.click(u)}else{d.usosCore.console.error("entityURLs returned data in invalid format.")}}return v};var j=function(t){return d("<span>").attr("data-user-id",t.id).text(t.first_name+" "+t.last_name)};var a=function(u){var v=d.extend({},{message:{pl:"Wystąpił niespodziewany błąd.",en:"Unexpected error occured."},adviseRefreshing:null,adviseRepeating:null,adviceCheckingPermissions:null,adviseContactingAdmins:null},u);var t=d("<div class='ua-paragraphs ua-container'>");t.append(d("<p style='font-size: 120%; margin-bottom: 25px'>").append(d("<b>").html(d.usosCore.langSelect(v.message))));$ul=d("<ul>");t.append($ul);if(v.adviseRefreshing!==false){$ul.append(d("<li>").html(d.usosCore.langSelect("<p><b>Najpierw spróbuj odświeżyć stronę.</b> Odwieżenie strony często może pomóc, np. jeśli błąd jest spowodowany automatycznym wylogowaniem po dłuższej nieaktywności.</p><p style='font-size: 120%; margin-bottom: 18px'><a>Kliknij tutaj, aby odświeżyć stronę</a></p>","<p><b>First, try to refresh the page.</b> Refreshing can often help, particularly if the error occured due to an automatic user sign-out after a prolonged period of inactivity.</p><p style='font-size: 120%; margin-bottom: 18px'><a>Click here to refresh the page</a></p>")).each(function(){d(this).find("a").addClass("ua-link").click(function(){window.location.reload(true)})}))}if(v.adviseRepeating!==false){$ul.append(d("<li>").html(d.usosCore.langSelect("Spróbuj ponownie wykonać akcję, która spowodowała wystąpienie błędu. Być może był to jednorazowy błąd spowodowany chwilową utratą połączenia z Internetem?","Try to repeat the action which you were doing when the error occured. Perhaps it was a one-time network error caused by bad Internet connection?")))}if(v.adviceCheckingPermissions!==false){$ul.append(d("<li>").html(d.usosCore.langSelect("Upewnij się, czy posiadasz odpowiednie uprawnienia. Czy jesteś zalogowany? Być może musisz uzyskać pewne dodatkowe uprawnienia, aby móc wyświetlić stronę lub wykonać akcję, którą właśnie próbowałeś wykonać?","Make sure you have proper privileges. Are you signed in? Perhaps, you need to acquire some special privileges before you can view this page or perform this action?")))}if(v.adviseContactingAdmins!==false){$ul.append(d("<li>").html(d.usosCore.langSelect("Jeśli problem będzie się powtarzał, to skontaktuj się z administratorem. Napisz na której stronie i w którym momencie problem wystąpuje, tak aby administrator mógł go dokładniej zbadać.","If the problem persists, contact the administrator. Try to include detailed descriptions of where and when the error occurs, so that the administrator will be able to examine it closely.")))}t.append(d("<p style='text-align: center; font-size: 120%; margin-top: 20px'>").html(d("<a class='ua-link'>").html(d.usosCore.langSelect("Zamknij i kontynuuj","Close and continue")).click(function(){t.dialog("close")})));var w=function(){t.dialog({dialogClass:"ua-panic-dialog",resizable:false,modal:true,width:"600px",height:"auto",closeText:d.usosCore.langSelect("Zamknij","Close")})};setTimeout(w,2000)};var b=function(v){var u=v.split(/[\r\n]{2,}/);var t=d("<div>");d.each(u,function(w,x){t.append(d("<p>").text(x))});return t.children()};var k=function(t){return s.settings.entityURLs.slip_template.replace("{0}",t)};d[p]={init:n,usosapiFetch:e,getLangPref:q,langSelect:c,console:l,filterFields:f,entities:{user:{link:m,label:j},slip_template:{url:k}},panic:a,makeParagraphs:b}})(jQuery);(function(h){var e="usosForms";var g=function(r,q){var p=h("<"+r+" class='ua-widget'>");if(q){p.attr("data-fname",q)}return p};var a=function(q,s,p){var t=q.field_errors;var r=t[s];if(r){p.addClass(e+"-showErr").usosOverlays("showContextMessage",{type:"error",message:h.usosCore.langSelect(r)});return[s]}else{return[]}};var i={getValue:function(){if(h(this).attr("data-fname")){throw"Named widgets MUST implement getValue!"}else{throw"Calling getValue on an unnamed widget!"}},setValue:function(){if(h(this).attr("data-fname")){throw"Named widgets MUST implement setValue!"}else{throw"Calling setValue on an unnamed widget!"}},getFlatValues:function(){var q=h(this).usosForms("value");if(h.isArray(q)){q=q.join("|")}else{if(q===null){q=""}else{if(typeof q==="boolean"){q=q?"true":"false"}else{if(typeof q!=="string"){throw"Internal error. Invalid flatValue."}}}}var p={};p[h(this).attr("data-fname")]=q;return p},showErrors:function(p){if(h(this).attr("data-fname")){return a(p,h(this).attr("data-fname"),h(this))}else{throw"Calling showErrors on an unnamed widget!"}}};var j={_customWidget:function(p,q){return g("div",p).data(e,h.extend({},i,q))},label:function(){var p=function(){return h(this).find("div").text()};var r=function(s){h(this).find("div").text(s)};var q=function(s){return a(s,h(this).attr("data-fname"),h(this).find("span"))};return function(t){var s=h("<div>").css("width","auto").css("max-width","300px");return g("div",t).append(s).data(e,h.extend({},i,{getValue:p,setValue:r,showErrors:q}))}}(),textbox:function(){var p=function(){var s=h(this).find("input, textarea");return s.val()};var r=function(s){h(this).find("input, textarea").val(s)};var q=function(s){return a(s,h(this).attr("data-fname"),h(this).find("input, textarea"))};return function(s){if(typeof s==="string"){s={name:s}}var t=h.extend({},{name:null,placeholder:null,multiline:false},s);var v;var u;if(!t.multiline){v=h("<input type='text' class='ua-form'>");u=300}else{v=h("<textarea class='ua-form'>");u=450}v.css("width",(u-9)+"px");if(t.placeholder){v.attr("placeholder",h.usosCore.langSelect(t.placeholder))}return g("div",t.name).append(v).data(e,h.extend({},i,{getValue:p,setValue:r,showErrors:q}))}}(),checkbox:function(){var p=function(){return h(this).find("input").prop("checked")};var r=function(s){h(this).find("input").prop("checked",s)};var q=function(s){return a(s,h(this).attr("data-fname"),h(this).find("label"))};return function(u,t){var s;if(t instanceof h){s=t}else{s=h("<span>").html(" "+h.usosCore.langSelect(t))}return g("div",u).append(h("<label>").append(h("<table class='ua-checkbox'>").append(h("<tr>").append(h("<td>").append(h("<input type='checkbox'>"))).append(h("<td>").append(s))))).data(e,h.extend({},i,{getValue:p,setValue:r,showErrors:q}))}}(),langdictbox:function(){var p=function(){var v=h(this).find(".ua-lang-PL").closest(".ua-widget");var u=h(this).find(".ua-lang-EN").closest(".ua-widget");return{pl:v.usosForms("value"),en:u.usosForms("value")}};var s=function(u){h(this).find(".ua-lang-PL").closest(".ua-widget").usosForms("value",u.pl);h(this).find(".ua-lang-EN").closest(".ua-widget").usosForms("value",u.en)};var t=function(){var w=h(this).usosForms("value");var u={};var v=h(this).attr("data-fname");u[v+"_pl"]=w.pl;u[v+"_en"]=w.en;return u};var r=function(z){var y=h(this).find(".ua-lang-PL").closest(".ua-widget");var x=h(this).find(".ua-lang-EN").closest(".ua-widget");var w=h(this).attr("data-fname");var v=a(z,w+"_pl",y.find("input, textarea"));var u=a(z,w+"_en",x.find("input, textarea"));h.merge(v,u);return v};var q=function(x,u){var w;if(x=="PL"){w={pl:"Po polsku",en:"In Polish"}}else{w={pl:"Po angielsku",en:"In English"}}var v=h.usosForms.textbox({name:null,placeholder:w,multiline:u});v.find("input, textarea").css("position","relative").css("z-index","1");v.css("position","relative").prepend(h("<div class='ua-form-textbox-icon'>").addClass("ua-lang-"+x));return v};return function(w){if(typeof w==="string"){w={name:w}}var y=h.extend({},{name:null,multiline:false},w);var x=q("PL",y.multiline);var v=q("EN",y.multiline);var u=g("div",y.name).append(x).append(v.css("margin-top","5px")).data(e,h.extend({},i,{getValue:p,setValue:s,getFlatValues:t,showErrors:r}));x.add(v).find("input, textarea").focus(function(){x.find(".ua-form-textbox-icon").stop(true).delay(100).animate({left:-13},150,"easeOutCubic");v.find(".ua-form-textbox-icon").stop(true).delay(180).animate({left:-13},150,"easeOutCubic")}).blur(function(){x.find(".ua-form-textbox-icon").stop(true).delay(100).animate({left:-2},150,"easeOutCubic");v.find(".ua-form-textbox-icon").stop(true).delay(180).animate({left:-2},150,"easeOutCubic")});return u}}(),tr:function(){var p=function(q){var r=h("<td>");if(q){r.append(h.usosTip.create({content:q}))}return r};return function(q){var r=h.extend({},{tip:null,title:null,content:null},q);return g("tr").append(p(r.tip)).append(h("<td class='ua-strong'>").css("text-align","right").html(r.title!==null?h.usosCore.langSelect(r.title)+":":"")).append(h("<td>").html(r.content))}}(),hr:function(){return g("hr").addClass("ua-hr")},selectbox:function(){var q=function(){return h(this).find("select").val()};var t=function(u){h(this).find("select").val(u)};var s=function(v){var u=h(this).find("select");h.each(v,function(x,w){u.append(h("<option>").attr("value",x).text(h.usosCore.langSelect(w)))})};var p=function(u){h(this).find("select").empty();h(this).usosForms("widgetCall","addOptions",u)};var r=function(u){return a(u,h(this).attr("data-fname"),h(this).find("select"))};return function(v,u){var w=g("div",v).append(h("<select class='ua-form'>").css("width","300px")).data(e,h.extend({},i,{getValue:q,setValue:t,replaceOptions:p,addOptions:s,showErrors:r}));w.usosForms("widgetCall","replaceOptions",u);return w}}()};var b=function(p){return p.find(".ua-widget[data-fname]").addBack().filter(".ua-widget[data-fname]")};var l=function(){h(this).find("."+e+"-showErr").removeClass(e+"-showErr").usosOverlays("hideContextMessage")};var o=function(){return this.each(function(p){if(p!==0){h(this).prepend(h.usosForms.hr())}})};var k=function(){var p=(arguments.length>0)?arguments[0]:undefined;var q=null;var r=this.each(function(){if(p===undefined){q=h(this).data(e).getValue.apply(this);return false}else{h(this).data(e).setValue.apply(this,[p])}});if(p===undefined){return q}else{return r}};var m=function(){var q=this;var p=arguments.length>0?arguments[0]:undefined;if(p===undefined){var r={};b(q).each(function(){r[h(this).attr("data-fname")]=h(this).usosForms("value")});return r}else{h.each(p,function(s,t){var u=b(q).filter("[data-fname="+s+"]");if(u.length===0){h.usosCore.console.log("Could not find a widget named '"+s+"'")}u.each(function(){h(this).usosForms("value",t)})})}};var c=function(){var p=function(r){var s=r.data(e);if(!s.getFlatValues){throw"Missing methods in widget's data!"}var q=s.getFlatValues.apply(r);return q};return function(){var q={};this.each(function(){var s=h(this);var r=b(s);r.each(function(){var t=h(this);h.each(p(t),function(u,v){q[u]=v})})});return q}}();var f=function(q){var p=null;var r=Array.prototype.slice.call(arguments,1);this.each(function(){var s=h(this);if(s.hasClass("ua-widget")){p=s.data(e)[q].apply(this,r)}else{h.usosCore.console.error("Calling widgetCall on a non-widget!")}return false});return p};var n=function(s){var t=h.extend({},{response:null,form:null},s);var r=h.extend({},t.response.field_errors);if(t.form){b(t.form).each(function(){var u=h(this).data(e).showErrors.apply(this,[t.response]);h.each(u,function(v,w){delete r[w]})})}var q=0;h.each(r,function(){q++});if(q===0){return}var p=h("<div class='ua-paragraphs ua-container'>");p.append(h("<p style='font-size: 120%; margin-bottom: 15px'>").append(h("<b>").html(h.usosCore.langSelect("Zmiany nie mogły zostać zapisane.","Unable to save changes."))));$ul=h("<ul>");p.append($ul);h.each(r,function(v,u){$ul.append(h("<li>").html(h.usosCore.langSelect(u)))});p.append(h("<p style='text-align: center; font-size: 120%; margin-top: 20px'>").html(h("<a class='ua-link'>").html(h.usosCore.langSelect("Zamknij","Close")).click(function(){p.dialog("close")})));p.dialog({dialogClass:"ua-panic-dialog",resizable:false,modal:true,width:"500px",height:"auto",closeText:h.usosCore.langSelect("Zamknij","Close")})};h.usosForms=h.extend({},{showErrors:n},j);var d={hrs:o,value:k,values:m,flatValues:c,hideErrors:l,widgetCall:f};h.fn[e]=function(p){if(d[p]){return d[p].apply(this,Array.prototype.slice.call(arguments,1))}else{h.error("Method "+p+" does not exist on jQuery."+e)}}})(jQuery);(function(d){var j="usosOverlays.contextMessage";var i="usosOverlays.progress";var e=false;var g=function(m){var o=d(window).scrollTop();var n=o+d(window).height();var k=d(m).offset().top;var l=k+d(m).height();return((l<=n)&&(k>=o))};var f=function(k){return this.each(function(){var l=d(this);if(l.data(j)){l.usosOverlays("hideContextMessage",function(){l.usosOverlays("showContextMessage",k)});return}var m={};m.settings=d.extend({},{type:null,message:null,scrollToBeVisible:true},k);if(m.settings.type!=="error"){d.usosCore.console.error("Message type must equal 'error'.");return}if(m.settings.message===null){d.usosCore.console.error("Message parameter is missing.");return}l.data(j,m);m.$error=d("<div>").addClass("ua-container").addClass("ua-form-error").css("opacity",".1").text(m.settings.message);d("body").append(m.$error);m.$error.position({my:"center-20 bottom-3",at:"right top",of:l,using:function(n,o){d(this).css(n);d("<div>").addClass("ua-form-error-arrow").addClass(o.vertical).addClass(o.horizontal).appendTo(this)}});m.$error.click(function(){var n=l.find("input:visible, select:visible, textarea:visible");if(n.length===0){l.trigger("focus")}else{if(n.length==1){n.trigger("focus")}else{l.usosOverlays("hideContextMessage")}}});l.find("input:visible, select:visible, textarea:visible").addBack().on("focus."+j+" keypress."+j+" change."+j,function(){l.usosOverlays("hideContextMessage")});m.$error.fadeTo("fast",1);if(m.settings.scrollToBeVisible&&(!g(m.$error))&&(!e)){e=true;d("html, body").animate({scrollTop:m.$error.offset().top-30},500,function(){e=false})}})};var a=function(k){return this.each(function(){var l=d(this);var m=l.data(j);if(!m){return}m.$error.unbind();l.unbind("."+j);l.removeData(j);m.$error.fadeTo("fast",0,function(){m.$error.remove();if(k){k()}})})};var h=function(l){var k=0;l.parents().each(function(){var m=parseInt(d(this).css("zIndex"),10);if(m>k){k=m}});return k};var c=function(k){return this.each(function(){var n=d(this);var p=n.data(i);if(!p){p={};n.data(i,p);p.settings={state:"loading",delay:300,opacity:0.8,fadeDuration:300}}if(typeof k!=="object"){k={state:k}}d.extend(p.settings,k);if(p.settings.state=="hide"){if(p.$bg){p.$bg.remove();p.$fg.remove();n.removeData(i)}return}if(!p.$bg){p.$bg=d("<div>").addClass("ua-progressoverlay-background").hide();d(document.body).append(p.$bg);p.$fg=d("<table>").addClass("ua-progressoverlay-foreground").hide().append(d("<tr>").append(d("<td>")));d(document.body).append(p.$fg)}var m=p.$bg;var l=p.$fg;l.find("td").empty();m.add(l).css("z-index",h(n)).css("left",n.offset().left).css("top",n.offset().top).css("width",n.outerWidth()).css("height",n.outerHeight()).css("opacity",p.settings.opacity).delay(p.settings.delay).each(function(){if(d("body").has(d(this)).length>0){d(this).fadeIn(p.settings.fadeDuration)}});var o;switch(p.settings.state){case"loading":o=d.usosCore.langSelect("Wczytywanie...","Loading...");break;case"saving":o=d.usosCore.langSelect("Zapisywanie...","Saving...");break;case"hide":throw ("Should return eariler!");default:throw ("Unknown state: "+p.settings.state)}l.find("td").append(d("<span>").attr("class","ua-loading").attr("title",o));l.delay(p.settings.delay+(p.settings.fadeDuration/2)).each(function(){if(!d.contains(document.documentElement,m[0])){return}l.fadeIn(p.settings.fadeDuration)})})};var b={showContextMessage:f,hideContextMessage:a,progressIndicator:c};d.fn.usosOverlays=function(k){if(b[k]){return b[k].apply(this,Array.prototype.slice.call(arguments,1))}else{d.error("Method "+k+" does not exist.")}}})(jQuery);(function(d){var p="usosSelector";var a=null;var e=function(u,v){g();a=setTimeout(function(){a=null;v()},u*1000)};var g=function(){if(a){clearTimeout(a);a=null}};var q=function(){return 0.25};var j=function(u){u.$root.addClass("ua-filled")};var c=function(u){u.$root.removeClass("ua-filled")};var m=function(v,u){return JSON.stringify(v)==JSON.stringify(u)};var r=function(){var w=d(this);var x=w.data(p);x.knownItems={};w.empty().addClass("ua-container ua-selector").css("width",x.settings.width).append(d("<textarea>").attr("rows","1").css("width",x.settings.width));x.suggestionsSyncObject={};x.previousValue=x.settings.multi?[]:null;x.$root=w;x.$textarea=w.find("textarea");var u=x.$root.offset().top;var v=d(document).height()-x.$root.offset().top-x.$root.height();x.$textarea.textext({plugins:"autocomplete tags focus prompt",prompt:x.settings.prompt,autocomplete:{dropdown:{maxHeight:"200px",position:(v>200)?"below":((u>v)?"above":"below")},render:function(z){var y=d("<span>").html(x.settings.suggestionRenderer(x.knownItems[z]));y.find("*").addBack().addClass("text-label");return y}},ext:{tags:{renderTag:function(y){var z=d(this.opts("html.tag"));z.find(".text-label").html(x.settings.tagRenderer(x.knownItems[y]));z.data(p,x.knownItems[y]);z.data("text-tag",y);return z}}}}).bind("getSuggestions",function(B,A){var C=d(this);var y=d(B.target).textext()[0];var z=(A?A.query:"")||"";e(q(),function(){d.usosCore.usosapiFetch({sourceId:x.settings.sourceId,method:x.settings.search.method,params:x.settings.search.paramsProvider(z),syncMode:"receiveIncrementalFast",syncObject:x.suggestionsSyncObject,success:function(E){var D=[];d.each(x.settings.search.itemsExtractor(E),function(F,G){var H=x.settings.idExtractor(G);x.knownItems[H]=G;D.push(H)});C.trigger("setSuggestions",{result:D})},error:function(F,E,D){x.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.langSelect("Nie udało się wczytać listy sugestii. Spróbuj odświeżyć stronę (F5).","Could not load the list of suggestions. Try to refresh tha page (F5).")})}})})}).bind("isTagAllowed",function(A,z){if(!x.knownItems[z.tag]){x.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.langSelect("Przed wciśnięciem Enter należy poczekać na załadowanie listy sugestii.","Before pressing Enter, you should wait until the suggestions show up.")});z.result=false;return}var y=l(x);if((!x.settings.multi)&&(y.length>0)){b(x,[]);return}if(x.settings.multi&&d.inArray(z.tag,y)>=0){x.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.langSelect("Ta pozycja już znajduje się na liście.","This item is already on the list.")});z.result=false;return}}).bind("setFormData",function(){var y=x.$root.usosSelector("value");if(!x.settings.multi){if(y===null){c(x)}else{j(x)}}if(!m(y,x.previousValue)){x.previousValue=y;x.$root.trigger("change")}});if(x.settings.value){x.$root.usosSelector("value",x.settings.value)}};var f=function(u){return{prompt:d.usosCore.langSelect("Wpisz imię i nazwisko","Enter the user's name"),search:{method:"services/users/search",paramsProvider:function(v){return{name:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/users/users",paramsProvider:function(v){return{user_ids:v.join("|"),fields:"id|first_name|last_name"}},itemsExtractor:function(w){var v=[];d.each(w,function(x,y){if(y===null){d.usosCore.console.warn("User "+x+" not found! Will be skipped!");return true}v.push(y)});return v}},idExtractor:function(v){return v.user_id||v.id},suggestionRenderer:function(w){var v=d("<div>");v.append(d("<span>").html(w.match));d.each(w.active_employment_functions,function(x,y){v.append(" ").append(d("<span class='ua-note'>").text("- "+d.usosCore.langSelect(y["function"])+" ("+d.usosCore.langSelect(y.faculty.name)+")"))});d.each(w.active_student_programmes,function(x,y){v.append(" ").append(d("<span class='ua-note'>").text("- "+d.usosCore.langSelect(y.programme.description)))});return v},tagRenderer:function(v){if(v.match){return d("<span>").html(v.match).text()}else{return v.first_name+" "+v.last_name}}}};var i=function(u){return{prompt:d.usosCore.langSelect("Wpisz nazwę przedmiotu","Enter a course name"),search:{method:"services/courses/search",paramsProvider:function(v){return{lang:d.usosCore.getLangPref(),name:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/courses/courses",paramsProvider:function(v){return{course_ids:v.join("|"),fields:"id|name"}},itemsExtractor:function(w){var v=[];d.each(w,function(y,x){if(x===null){d.usosCore.console.warn("Course "+y+" not found! Will be skipped!");return true}v.push(x)});return v}},idExtractor:function(v){return v.course_id||v.id},suggestionRenderer:function(v){return v.match},tagRenderer:function(x){var v;if(x.match){v=d("<span>").html(x.match).text();var w=v.indexOf(" ("+x.course_id+")");if(w>0){v=v.substring(0,w)}}else{v=d.usosCore.langSelect(x.name)}return d("<span>").text(v).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"180px","text-overflow":"ellipsis"})}}};var n=function(u){return{prompt:d.usosCore.langSelect("Wpisz nazwę jednostki","Enter a faculty name"),search:{method:"services/fac/search",paramsProvider:function(v){return{lang:d.usosCore.getLangPref(),fields:"id|match|name",query:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/fac/faculties",paramsProvider:function(v){return{fac_ids:v.join("|"),fields:"id|name"}},itemsExtractor:function(w){var v=[];d.each(w,function(x,y){if(y===null){d.usosCore.console.warn("Faculty "+x+" not found! Will be skipped!");return true}v.push(y)});return v}},idExtractor:function(v){return v.fac_id||v.id},suggestionRenderer:function(v){return v.match},tagRenderer:function(w){var v=d.usosCore.langSelect(w.name);return d("<span>").text(v).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"250px","text-overflow":"ellipsis"})}}};var k=function(u){return{prompt:d.usosCore.langSelect("Wpisz nazwę szablonu obiegówki","Enter a slip template name"),search:{method:"services/slips/search_templates",paramsProvider:function(v){return{langpref:d.usosCore.getLangPref(),fields:"id|match|name|state",query:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/slips/templates",paramsProvider:function(v){return{tpl_ids:v.join("|"),fields:"id|name"}},itemsExtractor:function(w){var v=[];d.each(w,function(y,x){if(x===null){d.usosCore.console.warn("Template "+y+" not found! Will be skipped!");return true}v.push(x)});return v}},idExtractor:function(v){return v.id},suggestionRenderer:function(w){var v=d("<div>");v.append(d("<span>").html(w.match));if(w.state!="active"){v.append(" ").append(d("<span class='ua-note'>").text(w.state=="draft"?d.usosCore.langSelect("(kopia robocza)","(draft)"):d.usosCore.langSelect("(przestarzały)","(obsolete)")))}return v},tagRenderer:function(v){return d("<span>").text(v.name).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"250px","text-overflow":"ellipsis"}).click(function(){var x=d.usosCore.langSelect('Przejść do strony szablonu "'+v.name+'"?','Go to the "'+v.name+'" template page?');if(confirm(x)){var w=d.usosCore.entities.slip_template.url(v.id);document.location=w}})}}};var o=function(u){return this.each(function(){var v=d(this);if(v.data(p)){v.usosSelector("destroy")}var w={};v.data(p,w);w.settings=d.extend({},{entity:null,sourceId:"default",width:"300px",multi:false,value:null},u);if(w.settings.entity=="user"){d.extend(w.settings,f(w.settings))}else{if(w.settings.entity=="course"){d.extend(w.settings,i(w.settings))}else{if(w.settings.entity=="faculty"){d.extend(w.settings,n(w.settings))}else{if(w.settings.entity=="slip_template"){d.extend(w.settings,k(w.settings))}else{throw ("Unknown entity: "+w.settings.entity)}}}}r.apply(this)})};var l=function(v){var u=[];d.each(v.$textarea.textext()[0].tags().tagElements(),function(w,x){u.push(v.settings.idExtractor(d(x).data(p)))});return u};var b=function(y,v){var x=y.$textarea.prop("disabled");y.$textarea.prop("disabled",true);var u=function(){d.each(l(y),function(A,B){y.$textarea.textext()[0].tags().removeTag(B)});var z=v.filter(function(A){return typeof y.knownItems[A]!=="undefined"});y.$textarea.textext()[0].tags().addTags(z);y.$textarea.prop("disabled",x);if(z.length<v.length){y.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.langSelect("Wystąpił błąd podczas wczytywania wartości tego pola. Sprawdź, czy pole zawiera pożądaną wartość. Jeśli problem będzie się powtarzał, proszę skontaktować się z administratorem.","Error occured while loading values for this form field. Check if the field has the proper value. If this problem persists, please contact the administrator.")})}};var w=v.filter(function(z){return typeof y.knownItems[z]==="undefined"});if(w.length>0){y.$root.usosOverlays("progressIndicator",{state:"loading"});d.usosCore.usosapiFetch({sourceId:y.settings.sourceId,method:y.settings.get.method,params:y.settings.get.paramsProvider(w),success:function(z){y.$root.usosOverlays("progressIndicator","hide");d.each(y.settings.get.itemsExtractor(z),function(A,B){var C=y.settings.idExtractor(B);y.knownItems[C]=B});u()},error:function(B,A,z){y.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.langSelect("Wystąpił błąd podczas wczytywania wartości tego pola. Spróbuj odświeżyć stronę (F5).","Error occured while loading values for this form field. Try to refresh the page (F5).")})}})}else{u()}};var t=function(v){var u=(typeof v==="undefined")?null:this;this.each(function(){var x=d(this);var y=x.data(p);if(typeof v==="undefined"){var w=l(y);if(y.settings.multi){u=w}else{if(w.length===0){u=null}else{u=w[0]}}return false}if(y.settings.multi){b(y,v)}else{if(v===null){b(y,[])}else{b(y,[v])}}});return u};var s=function(){return this.each(function(){var u=d(this);var v=u.data(p);v.$root.find("*").addBack().unbind();v.$root.remove();u.removeData(p)})};var h={init:o,value:t,destroy:s};d.fn.usosSelector=function(u){if(h[u]){return h[u].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof u==="object")||(!u)){return o.apply(this,arguments)}else{d.error("Method "+u+" does not exist on jQuery."+p)}}}})(jQuery);(function(d){var c="usosTip";var a=function(i){var g;if(i instanceof d){g=i}else{if(i.pl||i.en){g=d.usosCore.langSelect(i,"$span")}else{g=d("<span>").html(i)}}var f=g.text().length;var h;if(f<30){h="auto"}else{if(f<300){h="300px"}else{if(f<1200){var j=1-((1200-f)/900);h=(300+300*j)+"px"}else{h="600px"}}}return d("<div>").append(g).css("max-width",h)};var e=function(f){return d("<div>").append(f).html()};var b=function(g){var i=d("<div class='ua-tip'><div/></div>");var j={};i.data(c,j);j.settings=d.extend({},{content:null,position:"top"},g);var h=null;var f=null;if(typeof j.settings.content==="function"){h=d.usosCore.langSelect("Wczytywanie...","Loading...");f=j.settings.content}else{h=a(j.settings.content)}j.$img=i.find("div");j.$img.tooltipster({content:e(h),delay:f?200:0,speed:0,position:j.settings.position,theme:"ua-tooltip ua-tooltip-info",functionReady:function(){if(f===null){return}var k=f.apply(i);f=null;k.done(function(m){var l=a(m);j.$img.tooltipster("update",e(l))}).fail(function(){var l=d("<div>").text(d.usosCore.langSelect("Nie udało się załadować treści podpowiedzi. Odśwież stronę i spróbuj ponownie.","Could not load the content of the tip. Refresh the page and try again."));l.css("max-width","200px");j.$img.tooltipster("update",e(l))})}}).attr("tabindex",0).focus(function(){d(this).tooltipster("show")}).blur(function(){d(this).tooltipster("hide")});return i};d.usosTip={create:b}})(jQuery);